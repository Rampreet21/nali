<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sessional Marks - Teacher Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --white: #ffffff;
            --sidebar-width: 280px;
            --transition: all 0.3s ease;
        }
    
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }
    
        .app-container {
            display: flex;
            min-height: 100vh;
        }
    
        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            transition: var(--transition);
            z-index: 100;
            box-shadow: 4px 0 10px rgba(0, 0, 0, 0.1);
        }
    
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
    
        .sidebar-header h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }
    
        .sidebar-header h2 i {
            font-size: 1.5rem;
        }
    
        .sidebar-menu {
            padding: 0 10px;
        }
    
        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 6px;
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
        }
    
        .menu-item:hover,
        .menu-item.active {
            background-color: rgba(255, 255, 255, 0.1);
        }
    
        .menu-item i {
            margin-right: 10px;
            font-size: 1.1rem;
            width: 24px;
            text-align: center;
        }
    
        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            transition: var(--transition);
            padding: 20px;
        }
    
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 25px;
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
        }
    
        .header-title h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--dark);
        }
    
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
    
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
        }
    
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }
    
        .user-avatar:hover {
            transform: scale(1.05);
        }
    
        .profile-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 250px;
            z-index: 1000;
            display: none;
            animation: fadeIn 0.2s ease;
        }
    
        .profile-dropdown.active {
            display: block;
        }
    
        .profile-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        .profile-header .avatar-lg {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
        }
    
        .profile-info h4 {
            margin: 0;
            font-size: 1rem;
        }
    
        .profile-info p {
            margin: 3px 0 0;
            font-size: 0.8rem;
            color: var(--gray);
        }
    
        .profile-menu {
            padding: 10px 0;
        }
    
        .profile-menu a {
            display: block;
            padding: 10px 15px;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
        }
    
        .profile-menu a:hover {
            background-color: #f5f7fa;
        }
    
        .profile-menu a i {
            width: 20px;
            margin-right: 8px;
            color: var(--gray);
        }
    
        .notification-icon {
            position: relative;
            cursor: pointer;
        }
    
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger);
            color: var(--white);
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    
        .notification-dropdown {
            position: absolute;
            top: 50px;
            right: 0;
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 300px;
            z-index: 1000;
            display: none;
            animation: fadeIn 0.2s ease;
        }
    
        .notification-dropdown.active {
            display: block;
        }
    
        .notification-header {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        .notification-header h4 {
            margin: 0;
            font-size: 1rem;
        }
    
        .notification-header a {
            font-size: 0.8rem;
            color: var(--primary);
            text-decoration: none;
        }
    
        .notification-list {
            max-height: 300px;
            overflow-y: auto;
        }
    
        .notification-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            transition: var(--transition);
        }
    
        .notification-item:hover {
            background-color: #f5f7fa;
        }
    
        .notification-item.unread {
            background-color: rgba(67, 97, 238, 0.05);
        }
    
        .notification-item .notification-title {
            font-weight: 500;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
        }
    
        .notification-item .notification-time {
            font-size: 0.75rem;
            color: var(--gray);
        }
    
        .notification-item .notification-message {
            font-size: 0.85rem;
            color: var(--gray);
        }
    
        /* Card Styles */
        .card {
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 25px;
            transition: var(--transition);
            border: none;
        }
    
        .card:hover {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
    
        .card-header {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        .card-header h3 {
            font-weight: 600;
            color: var(--dark);
            margin: 0;
        }
    
        .card-body {
            padding: 20px;
        }
    
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
    
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
    
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-size: 0.95rem;
            transition: var(--transition);
        }
    
        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
            outline: none;
        }
    
        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
        }
    
        .form-col {
            flex: 1;
            padding: 0 10px;
            min-width: 250px;
        }
    
        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 0.95rem;
        }
    
        .btn i {
            margin-right: 8px;
        }
    
        .btn-primary {
            background-color: var(--primary);
            color: var(--white);
        }
    
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
    
        .btn-success {
            background-color: var(--success);
            color: var(--white);
        }
    
        .btn-success:hover {
            background-color: #3ab4d8;
        }
    
        .btn-danger {
            background-color: var(--danger);
            color: var(--white);
        }
    
        .btn-danger:hover {
            background-color: #e5177a;
        }
    
        .btn-warning {
            background-color: var(--warning);
            color: var(--white);
        }
    
        .btn-warning:hover {
            background-color: #e68a1b;
        }
    
        .btn-sm {
            padding: 6px 12px;
            font-size: 0.85rem;
        }
    
        /* Table Styles */
        .table-responsive {
            overflow-x: auto;
        }
    
        .table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            background-color: var(--white);
            border-radius: 10px;
            overflow: hidden;
        }
    
        .table th {
            background-color: var(--primary);
            color: var(--white);
            padding: 12px 15px;
            text-align: left;
            font-weight: 500;
        }
    
        .table td {
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            vertical-align: middle;
        }
    
        .table tr:last-child td {
            border-bottom: none;
        }
    
        .table tr:hover td {
            background-color: rgba(67, 97, 238, 0.05);
        }
    
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 500;
        }
    
        .badge-success {
            background-color: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }
    
        .badge-warning {
            background-color: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }
    
        .badge-danger {
            background-color: rgba(247, 37, 133, 0.1);
            color: var(--danger);
        }
    
        /* Subject Input Grid */
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
    
        .subject-input-group {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            transition: var(--transition);
        }
    
        .subject-input-group:hover {
            background-color: #f1f3f5;
        }
    
        .subject-input-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.85rem;
            color: var(--gray);
        }
    
        /* House Test Options */
        .house-test-options {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }
    
        .house-test-option {
            flex: 1;
            background-color: #f8f9fa;
            border-radius: 6px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid #e0e0e0;
        }
    
        .house-test-option:hover {
            background-color: #f1f3f5;
        }
    
        .house-test-option.selected {
            background-color: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }
    
        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
    
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    
        .fade-in {
            animation: fadeIn 0.3s ease forwards;
        }
    
        /* Toast Notification */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
        }
    
        .toast {
            padding: 15px 20px;
            border-radius: 8px;
            color: var(--white);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.3s ease;
            max-width: 350px;
        }
    
        .toast i {
            margin-right: 10px;
            font-size: 1.2rem;
        }
    
        .toast-success {
            background-color: var(--success);
        }
    
        .toast-error {
            background-color: var(--danger);
        }
    
        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }
    
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
    
        .modal-content {
            background-color: var(--white);
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-20px);
            transition: var(--transition);
        }
    
        .modal.active .modal-content {
            transform: translateY(0);
        }
    
        .modal-header {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    
        .modal-header h3 {
            margin: 0;
            font-weight: 600;
        }
    
        .modal-body {
            padding: 20px;
        }
    
        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
    
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
    
            .sidebar.active {
                transform: translateX(0);
            }
    
            .main-content {
                margin-left: 0;
            }
    
            .menu-toggle {
                display: block;
            }
        }
    
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
    
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
    
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }
    
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
    
        /* ===== AUTH MODAL ===== */
        .auth-modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
    
        .auth-modal-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
    
        .auth-modal {
            width: 100%;
            max-width: 420px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            transform: translateY(20px);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
    
        .auth-modal-backdrop.active .auth-modal {
            transform: translateY(0);
        }
    
        .auth-header {
            padding: 24px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            text-align: center;
        }
    
        .auth-header h3 {
            margin: 0;
            font-weight: 600;
            font-size: 1.5rem;
        }
    
        .auth-header p {
            margin: 8px 0 0;
            opacity: 0.9;
            font-size: 0.9rem;
        }
    
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid #eee;
        }
    
        .auth-tab {
            flex: 1;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray);
            transition: all 0.2s ease;
            border-bottom: 3px solid transparent;
        }
    
        .auth-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
    
        .auth-tab i {
            margin-right: 8px;
        }
    
        .auth-content {
            padding: 24px;
        }
    
        .auth-form {
            display: none;
        }
    
        .auth-form.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }
    
        .auth-form .form-group {
            margin-bottom: 20px;
        }
    
        .auth-form .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
    
        .input-with-icon {
            position: relative;
        }
    
        .input-with-icon i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }
    
        .auth-form .form-control {
            width: 100%;
            padding: 12px 16px 12px 42px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.95rem;
            transition: var(--transition);
        }
    
        .auth-form .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
            outline: none;
        }
    
        .btn-block {
            display: block;
            width: 100%;
            padding: 14px;
            font-size: 1rem;
        }
    
        .auth-footer {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: var(--gray);
        }
    
        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
    
        .auth-footer a:hover {
            text-decoration: underline;
        }
    
        /* Profile Picture Styles */
        .profile-picture-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
    
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            background-size: cover;
            background-position: center;
        }
    
        /* Readonly field styling */
        .form-control[readonly] {
            background-color: #f8f9fa;
            border-color: #e9ecef;
            cursor: not-allowed;
        }
    
        /* Settings card layout */
        .settings-card {
            height: 100%;
            display: flex;
            flex-direction: column;
        }
    
        .settings-card .card-body {
            flex: 1;
        }
    
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
    
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            gap: 15px;
        }
    
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
    
        .stat-icon.bg-primary {
            background-color: var(--primary);
        }
    
        .stat-icon.bg-success {
            background-color: var(--success);
        }
    
        .stat-icon.bg-warning {
            background-color: var(--warning);
        }
    
        .stat-icon.bg-info {
            background-color: var(--info);
        }
    
        .stat-info h3 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
        }
    
        .stat-info p {
            margin: 5px 0 0;
            color: var(--gray);
            font-size: 0.9rem;
        }
    
        /* Recent Activity */
        .recent-activity {
            margin-top: 30px;
        }
    
        .recent-activity h4 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        .activity-list {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
    
        .activity-item {
            display: flex;
            gap: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
    
        .activity-item:last-child {
            border-bottom: none;
        }
    
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
        }
    
        .activity-content {
            flex: 1;
        }
    
        .activity-content p {
            margin: 0;
        }
    
        .activity-time {
            color: var(--gray);
            font-size: 0.8rem;
            margin-top: 5px;
            display: block;
        }
    
        /* Quick Actions */
        .quick-actions {
            margin-top: 30px;
        }
    
        .quick-actions h4 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    
        .action-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
    
        /* Additional marks types */
        .marks-type-tabs {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 15px;
        }
    
        .marks-type-tab {
            padding: 10px 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
        }
    
        .marks-type-tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            font-weight: 500;
        }
    
        .marks-type-content {
            display: none;
        }
    
        .marks-type-content.active {
            display: block;
        }
    
        /* Print styles */
        @media print {
            body * {
                visibility: hidden;
            }
    
            .print-section,
            .print-section * {
                visibility: visible;
            }
    
            .print-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
            }
    
            .no-print {
                display: none !important;
            }
        }
    
        /* File upload styles */
        .file-upload {
            position: relative;
            display: inline-block;
        }
    
        .file-upload-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
    
        /* Chart container */
        .chart-container {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }
    
        /* Print button */
        .print-btn {
            margin-left: 10px;
        }
    
        .section-content {
            display: none;
        }
    
        .section-content.active {
            display: block;
            animation: fadeIn 0.3s ease forwards;
        }
    </style>

</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-chalkboard-teacher"></i> Sessional</h2>
            </div>
            <nav class="sidebar-menu">
                <a href="#" class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="#" class="menu-item" data-section="students">
                    <i class="fas fa-user-graduate"></i> Students
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-title">
                    <h1 id="pageTitle">Sessional Marks Management</h1>
                </div>
                <div class="header-actions">
                    <div class="user-profile">
                        <div class="user-avatar" id="userAvatar">JD</div>
                        <div class="profile-dropdown" id="profileDropdown">
                            <div class="profile-header">
                                <div class="avatar-lg" id="profileAvatar">JD</div>
                                <div class="profile-info">
                                    <h4 id="profileName">John Doe</h4>
                                    <p id="profileEmail">john.doe@example.com</p>
                                </div>
                            </div>
                            <div class="profile-menu">
                                <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="section-content active" id="dashboardSection">
                <div class="card fade-in">
                    <div class="card-header">
                        <h3><i class="fas fa-chalkboard"></i> Teacher Dashboard</h3>
                    </div>
                    <div class="card-body">
                        <div class="welcome-message">
                            <h4>Welcome back, <span id="teacherGreeting">Teacher</span>!</h4>
                            <p>Here's your daily overview of Sessional marks.</p>
                        </div>

                        <!-- Quick Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon bg-primary">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="totalStudents">0</h3>
                                    <p>Total Students</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon bg-warning">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="stat-info">
                                    <h3 id="avgMarks">0%</h3>
                                    <p>Average Marks</p>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="quick-actions">
                            <h4><i class="fas fa-bolt"></i> Quick Actions</h4>
                            <div class="action-buttons">
                                <button class="btn btn-primary" onclick="navigateToSection('students')">
                                    <i class="fas fa-plus"></i> Add Student Marks
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-content" id="studentsSection">
                <!-- Student Management Card -->
                <div class="card fade-in">
                    <div class="card-header">
                        <h3><i class="fas fa-user-graduate"></i> Student Marks Management</h3>
                    </div>
                    <div class="card-body">
                        <form id="studentForm">
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label" for="studentRollNo">Roll Number</label>
                                        <input type="text" class="form-control" id="studentRollNo" placeholder="Enter roll number" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label" for="studentName">Student Name</label>
                                        <input type="text" class="form-control" id="studentName" placeholder="Enter student name" required>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label" for="studentDepartment">Department</label>
                                        <select class="form-control" id="studentDepartment" required>
                                            <option value="">Select Department</option>
                                            <option value="Computer Science">Computer Science Engineering</option>
                                            <option value="Electrical Engineering">Electrical Engineering</option>
                                            <option value="Mechanical Engineering">Mechanical Engineering</option>
                                            <option value="Civil Engineering">Civil Engineering</option>
                                            <option value="Pharmacy">Pharmacy</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label" for="studentSemester">Semester</label>
                                        <select class="form-control" id="studentSemester" required>
                                            <option value="">Select Semester</option>
                                            <option value="1">1st Semester</option>
                                            <option value="2">2nd Semester</option>
                                            <option value="3">3rd Semester</option>
                                            <option value="4">4th Semester</option>
                                            <option value="5">5th Semester</option>
                                            <option value="6">6th Semester</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-col">
                                    <div class="form-group">
                                        <label class="form-label" for="studentSubject">Subject</label>
                                        <select class="form-control" id="studentSubject" required>
                                            <option value="">Select Subject</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Marks Type Tabs -->
                            <div class="marks-type-tabs">
                                <div class="marks-type-tab active" data-tab="theoryMarks">
                                    <i class="fas fa-book"></i> Theory Marks
                                </div>
                                <div class="marks-type-tab" data-tab="practicalMarks">
                                    <i class="fas fa-laptop-code"></i> Practical Marks
                                </div>
                            </div>

                            <!-- Theory Marks Section -->
                            <div class="marks-type-content active" id="theoryMarks">
                                <div class="form-group">
                                    <label class="form-label">Theory Marks</label>
                                    <div class="subject-grid">
                                        <div class="subject-input-group">
                                            <label>1. House Test 1</label>
                                            <input type="number" class="form-control" id="houseTest1" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>2. House Test 2</label>
                                            <input type="number" class="form-control" id="houseTest2" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>3. House Test 3</label>
                                            <input type="number" class="form-control" id="houseTest3" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>4. Assignment</label>
                                            <input type="number" class="form-control" id="assignmentMarks" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>5. Seminar</label>
                                            <input type="number" class="form-control" id="seminarMarks" placeholder="Marks" min="0" max="100">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Practical Marks Section -->
                            <div class="marks-type-content" id="practicalMarks">
                                <div class="form-group">
                                    <label class="form-label">Practical Marks</label>
                                    <div class="subject-grid">
                                        <div class="subject-input-group">
                                            <label>1. Practical File</label>
                                            <input type="number" class="form-control" id="practicalFile" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>2. Viva</label>
                                            <input type="number" class="form-control" id="vivaMarks" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>3. Performance</label>
                                            <input type="number" class="form-control" id="performanceMarks" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>4. Attendance</label>
                                            <input type="number" class="form-control" id="attendanceMarks" placeholder="Marks" min="0" max="100">
                                        </div>
                                        <div class="subject-input-group">
                                            <label>5. Total Practical Marks</label>
                                            <input type="number" class="form-control" id="totalPracticalMarks" placeholder="Marks" min="0" max="100" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Add Student
                                </button>
                                <button type="button" class="btn btn-success" id="saveAllData">
                                    <i class="fas fa-save"></i> Save All Data
                                </button>
                                <button type="button" class="btn btn-warning" id="clearForm">
                                    <i class="fas fa-eraser"></i> Clear Form
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <button type="button" class="btn btn-danger" id="downloadPdf">
                    <i class="fas fa-file-pdf"></i> Download PDF Report
                </button>

                <!-- Student Records Card -->
                <div class="card fade-in">
                    <div class="card-header">
                        <h3><i class="fas fa-table"></i> Student Records (Theory Marks)</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Roll No</th>
                                        <th>Name</th>
                                        <th>Subject</th>
                                        <th>House Test 1</th>
                                        <th>House Test 2</th>
                                        <th>House Test 3</th>
                                        <th>Assignment</th>
                                        <th>Seminar</th>
                                        <th>Total Marks</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody">
                                    <!-- Student data will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Practical Marks Records Card -->
                <div class="card fade-in">
                    <div class="card-header">
                        <h3><i class="fas fa-laptop-code"></i> Student Records (Practical Marks)</h3>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>S/N</th>
                                        <th>Roll No</th>
                                        <th>Name</th>
                                        <th>Subject</th>
                                        <th>Practical File</th>
                                        <th>Viva</th>
                                        <th>Performance</th>
                                        <th>Attendance</th>
                                        <th>Total Marks</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="practicalTableBody">
                                    <!-- Practical marks data will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script>
        // Global variables
        let currentUser = null;
        let students = [];
        
        // Department subjects by semester
        const departmentSubjects = {
            'Computer Science': {
                '1': ['Mathematics-I', 'Physics', 'Chemistry', 'Basic Electrical Engineering', 'Programming in C', 'Engineering Drawing'],
                '2': ['Mathematics-II', 'Data Structures', 'Digital Electronics', 'Discrete Mathematics', 'Environmental Studies'],
                '3': ['Object Oriented Programming', 'Computer Networks', 'Database Management', 'Operating Systems', 'Theory of Computation'],
                '4': ['Algorithm Design', 'Computer Architecture', 'Software Engineering', 'Web Technologies', 'Artificial Intelligence'],
                '5': ['Machine Learning', 'Cloud Computing', 'Big Data Analytics', 'Cyber Security', 'Mobile Application Development'],
                '6': ['Internet of Things', 'Blockchain Technology', 'Project Work', 'Elective-I', 'Elective-II']
            },
            'Electrical Engineering': {
                '1': ['Mathematics-I', 'Physics', 'Chemistry', 'Basic Electronics', 'Engineering Mechanics'],
                '2': ['Mathematics-II', 'Electrical Circuits', 'Electromagnetic Theory', 'Engineering Drawing', 'Workshop Practice'],
                '3': ['Network Analysis', 'Electronic Devices', 'Digital Electronics', 'Electrical Machines-I', 'Signals & Systems'],
                '4': ['Control Systems', 'Power Systems-I', 'Microprocessors', 'Measurements & Instrumentation', 'Power Electronics'],
                '5': ['Power Systems-II', 'Renewable Energy Systems', 'Industrial Drives', 'High Voltage Engineering', 'Project Management'],
                '6': ['Smart Grid Technologies', 'Electric Vehicle Technology', 'Major Project', 'Elective-I', 'Elective-II']
            },
            'Mechanical Engineering': {
                '1': ['Mathematics-I', 'Physics', 'Chemistry', 'Basic Electronics', 'Engineering Mechanics'],
                '2': ['Mathematics-II', 'Thermodynamics', 'Material Science', 'Electrical Circuits', 'Workshop Practice'],
                '3': ['Strength of Materials', 'Fluid Mechanics', 'Machine Design', 'Control Systems', 'Manufacturing Processes'],
                '4': ['Heat Transfer', 'Dynamics of Machinery', 'Thermal Engineering', 'CAD/CAM', 'Industrial Management'],
                '5': ['Automobile Engineering', 'Robotics', 'Refrigeration & Air Conditioning', 'Quality Control', 'Project Management'],
                '6': ['Advanced Manufacturing', 'Mechatronics', 'Major Project', 'Elective-I', 'Elective-II']
            },
            'Civil Engineering': {
                '1': ['Mathematics-I', 'Physics', 'Chemistry', 'Basic Electronics', 'Engineering Mechanics'],
                '2': ['Mathematics-II', 'Surveying', 'Building Materials', 'Engineering Drawing', 'Workshop Practice'],
                '3': ['Structural Analysis', 'Fluid Mechanics', 'Geotechnical Engineering', 'Concrete Technology', 'Transportation Engineering'],
                '4': ['Design of Structures', 'Hydrology', 'Environmental Engineering', 'Construction Management', 'Estimating & Costing'],
                '5': ['Earthquake Engineering', 'Advanced Construction Techniques', 'Urban Planning', 'Project Management', 'Disaster Management'],
                '6': ['Bridge Engineering', 'Smart City Concepts', 'Major Project', 'Elective-I', 'Elective-II']
            },
            'Pharmacy': {
                '1': ['Pharmaceutical Chemistry-I', 'Human Anatomy & Physiology', 'Pharmaceutics-I', 'Biochemistry', 'Remedial Mathematics/Biology'],
                '2': ['Pharmaceutical Chemistry-II', 'Pharmaceutical Analysis', 'Pharmaceutics-II', 'Pharmacognosy', 'Pathophysiology'],
                '3': ['Pharmacology-I', 'Pharmaceutical Chemistry-III', 'Pharmacognosy-II', 'Pharmaceutical Engineering', 'Pharmaceutical Microbiology'],
                '4': ['Pharmacology-II', 'Pharmaceutical Chemistry-IV', 'Pharmacotherapeutics-I', 'Pharmaceutical Jurisprudence', 'Medicinal Chemistry'],
                '5': ['Pharmacotherapeutics-II', 'Hospital Pharmacy', 'Clinical Pharmacy', 'Biopharmaceutics', 'Pharmaceutical Biotechnology'],
                '6': ['Pharmacy Practice', 'Novel Drug Delivery Systems', 'Major Project', 'Elective-I', 'Elective-II']
            }
        };

        // DOM elements
        const studentForm = document.getElementById('studentForm');
        const saveAllDataBtn = document.getElementById('saveAllData');
        const clearFormBtn = document.getElementById('clearForm');
        const studentsTableBody = document.getElementById('studentsTableBody');
        const practicalTableBody = document.getElementById('practicalTableBody');
        const userAvatar = document.getElementById('userAvatar');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileDropdown = document.getElementById('profileDropdown');
        const toastContainer = document.getElementById('toastContainer');
        const menuItems = document.querySelectorAll('.menu-item');
        const sectionContents = document.querySelectorAll('.section-content');
        const pageTitle = document.getElementById('pageTitle');
        const teacherGreeting = document.getElementById('teacherGreeting');
        const marksTypeTabs = document.querySelectorAll('.marks-type-tab');
        const marksTypeContents = document.querySelectorAll('.marks-type-content');
        const practicalFileInput = document.getElementById('practicalFile');
        const vivaMarksInput = document.getElementById('vivaMarks');
        const performanceMarksInput = document.getElementById('performanceMarks');
        const attendanceMarksInput = document.getElementById('attendanceMarks');
        const totalPracticalMarksInput = document.getElementById('totalPracticalMarks');
        const logoutBtn = document.getElementById('logoutBtn');
        const studentSemesterSelect = document.getElementById('studentSemester');
        const studentSubjectSelect = document.getElementById('studentSubject');
        const studentDepartmentSelect = document.getElementById('studentDepartment');
        const downloadPdfBtn = document.getElementById('downloadPdf');

        function initApp() {
            loadData();
            setupEventListeners();
            updateDashboardStats();
            updateProfileSection();
            
            // Initialize department-subject relationship
            studentDepartmentSelect.addEventListener('change', updateSemesterOptions);
            studentSemesterSelect.addEventListener('change', updateSubjectOptions);
        }

        // Load saved data from localStorage
        function loadData() {
            const savedStudents = localStorage.getItem('studentData');
            if (savedStudents) {
                students = JSON.parse(savedStudents);
                renderStudentsTable();
                renderPracticalTable();
                updateDashboardStats();
            }
        }

        // Update semester options based on selected department
        function updateSemesterOptions() {
            const department = studentDepartmentSelect.value;
            studentSemesterSelect.innerHTML = '<option value="">Select Semester</option>';
            
            if (department) {
                for (let i = 1; i <= 6; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = `${i}${getOrdinalSuffix(i)} Semester`;
                    studentSemesterSelect.appendChild(option);
                }
            }
            studentSubjectSelect.innerHTML = '<option value="">Select Subject</option>';
        }

        // Helper function to get ordinal suffix
        function getOrdinalSuffix(i) {
            const j = i % 10, k = i % 100;
            if (j === 1 && k !== 11) return 'st';
            if (j === 2 && k !== 12) return 'nd';
            if (j === 3 && k !== 13) return 'rd';
            return 'th';
        }

        // Update subject options based on selected semester and department
        function updateSubjectOptions() {
            const semester = studentSemesterSelect.value;
            const department = studentDepartmentSelect.value;
            studentSubjectSelect.innerHTML = '<option value="">Select Subject</option>';
            
            if (semester && department && departmentSubjects[department] && departmentSubjects[department][semester]) {
                departmentSubjects[department][semester].forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject;
                    option.textContent = subject;
                    studentSubjectSelect.appendChild(option);
                });
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            // Student form
            studentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                addStudent();
            });

            // Buttons
            saveAllDataBtn.addEventListener('click', saveAllStudentData);
            clearFormBtn.addEventListener('click', clearStudentForm);
            logoutBtn.addEventListener('click', logout);

            // Profile dropdown
            userAvatar.addEventListener('click', toggleProfileDropdown);

            // Navigation menu
            menuItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    navigateToSection(item.dataset.section);
                });
            });

            // Marks type tabs
            marksTypeTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.dataset.tab;
                    switchMarksTab(tabId);
                });
            });

            // Practical marks calculation
            [practicalFileInput, vivaMarksInput, performanceMarksInput, attendanceMarksInput].forEach(input => {
                input.addEventListener('input', calculatePracticalTotal);
            });
            
            // PDF download
            downloadPdfBtn.addEventListener('click', generatePdfReport);
        }

        // Switch between theory and practical marks tabs
        function switchMarksTab(tabId) {
            marksTypeTabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tab === tabId);
            });

            marksTypeContents.forEach(content => {
                content.classList.toggle('active', content.id === tabId);
            });
        }

        // Calculate practical total marks
        function calculatePracticalTotal() {
            const practicalFile = parseFloat(practicalFileInput.value) || 0;
            const viva = parseFloat(vivaMarksInput.value) || 0;
            const performance = parseFloat(performanceMarksInput.value) || 0;
            const attendance = parseFloat(attendanceMarksInput.value) || 0;
            
            const total = practicalFile + viva + performance + attendance;
            totalPracticalMarksInput.value = total > 0 ? total : '';
        }

        // Update profile section
        function updateProfileSection() {
            const initials = "JD";
            userAvatar.textContent = initials;
            profileAvatar.textContent = initials;
            profileName.textContent = "John Doe";
            profileEmail.textContent = "john.doe@example.com";
            teacherGreeting.textContent = "Teacher";
        }

        // Add new student
        function addStudent() {
            // Validate required fields
            const rollNo = document.getElementById('studentRollNo').value.trim();
            const name = document.getElementById('studentName').value.trim();
            const semester = document.getElementById('studentSemester').value;
            const department = document.getElementById('studentDepartment').value;
            const subject = document.getElementById('studentSubject').value;
        
            if (!rollNo || !name || !semester || !department || !subject) {
                showToast('Please fill all required fields', 'error');
                return;
            }
        
            // Collect marks
            const marks = {
                rollNo,
                name,
                semester,
                department,
                subject,
                houseTest1: document.getElementById('houseTest1').value || '0',
                houseTest2: document.getElementById('houseTest2').value || '0',
                houseTest3: document.getElementById('houseTest3').value || '0',
                assignmentMarks: document.getElementById('assignmentMarks').value || '0',
                seminarMarks: document.getElementById('seminarMarks').value || '0',
                practicalFile: document.getElementById('practicalFile').value || '0',
                vivaMarks: document.getElementById('vivaMarks').value || '0',
                performanceMarks: document.getElementById('performanceMarks').value || '0',
                attendanceMarks: document.getElementById('attendanceMarks').value || '0',
                totalPracticalMarks: document.getElementById('totalPracticalMarks').value || '0',
                addedDate: new Date().toISOString()
            };
        
            // Check if at least one mark is provided
            const hasTheoryMarks = marks.houseTest1 !== '0' || marks.houseTest2 !== '0' || marks.houseTest3 !== '0' || 
                                  marks.assignmentMarks !== '0' || marks.seminarMarks !== '0';
            const hasPracticalMarks = marks.practicalFile !== '0' || marks.vivaMarks !== '0' || 
                                     marks.performanceMarks !== '0' || marks.attendanceMarks !== '0';
            
            if (!hasTheoryMarks && !hasPracticalMarks) {
                showToast('Please add at least one mark (theory or practical)', 'error');
                return;
            }
        
            students.push(marks);
            renderStudentsTable();
            renderPracticalTable();
            clearStudentForm();
            updateDashboardStats();
            saveAllStudentData();
            
            showToast('Student record added successfully!', 'success');
        }

        // Render students table (theory marks)
        function renderStudentsTable() {
            studentsTableBody.innerHTML = '';
        
            if (students.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="11" style="text-align: center;">
                        No student records found. Add some students to get started.
                    </td>
                `;
                studentsTableBody.appendChild(row);
                return;
            }
        
            students.forEach((student, index) => {
                // Skip if student has no theory marks
                if (student.houseTest1 === '0' && student.houseTest2 === '0' && student.houseTest3 === '0' && 
                    student.assignmentMarks === '0' && student.seminarMarks === '0') {
                    return;
                }
                
                const row = document.createElement('tr');
        
                // Helper function to create mark cell
                const createMarkCell = (mark) => {
                    const cell = document.createElement('td');
                    const numMark = parseInt(mark);
                    cell.textContent = numMark > 0 ? numMark : '-';
                    return cell;
                };
                
                // Calculate total theory marks
                const totalMarks = [
                    parseInt(student.houseTest1),
                    parseInt(student.houseTest2),
                    parseInt(student.houseTest3),
                    parseInt(student.assignmentMarks),
                    parseInt(student.seminarMarks)
                ].reduce((sum, mark) => sum + mark, 0);
                
                // Create cells
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${student.rollNo}</td>
                    <td>${student.name}</td>
                    <td>${student.subject}</td>
                    <td>${student.houseTest1 !== '0' ? student.houseTest1 : '-'}</td>
                    <td>${student.houseTest2 !== '0' ? student.houseTest2 : '-'}</td>
                    <td>${student.houseTest3 !== '0' ? student.houseTest3 : '-'}</td>
                    <td>${student.assignmentMarks !== '0' ? student.assignmentMarks : '-'}</td>
                    <td>${student.seminarMarks !== '0' ? student.seminarMarks : '-'}</td>
                    <td>${totalMarks}</td>
                    <td>
                        <button class="btn btn-primary btn-sm" onclick="editStudent(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteStudent(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                `;
        
                studentsTableBody.appendChild(row);
            });
        }

        // Render practical marks table
        function renderPracticalTable() {
            practicalTableBody.innerHTML = '';
        
            if (students.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="10" style="text-align: center;">
                        No practical marks records found. Add some students to get started.
                    </td>
                `;
                practicalTableBody.appendChild(row);
                return;
            }
        
            students.forEach((student, index) => {
                // Skip if student has no practical marks
                if (student.practicalFile === '0' && student.vivaMarks === '0' && 
                    student.performanceMarks === '0' && student.attendanceMarks === '0') {
                    return;
                }
                
                const row = document.createElement('tr');
                
                // Calculate total practical marks
                const totalPracticalMarks = [
                    parseInt(student.practicalFile),
                    parseInt(student.vivaMarks),
                    parseInt(student.performanceMarks),
                    parseInt(student.attendanceMarks)
                ].reduce((sum, mark) => sum + mark, 0);
                
                // Create cells
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${student.rollNo}</td>
                    <td>${student.name}</td>
                    <td>${student.subject}</td>
                    <td>${student.practicalFile !== '0' ? student.practicalFile : '-'}</td>
                    <td>${student.vivaMarks !== '0' ? student.vivaMarks : '-'}</td>
                    <td>${student.performanceMarks !== '0' ? student.performanceMarks : '-'}</td>
                    <td>${student.attendanceMarks !== '0' ? student.attendanceMarks : '-'}</td>
                    <td>${totalPracticalMarks}</td>
                    <td>
                        <button class="btn btn-primary btn-sm" onclick="editStudent(${index})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-danger btn-sm" onclick="deleteStudent(${index})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </td>
                `;
        
                practicalTableBody.appendChild(row);
            });
        }

        // Edit student
        function editStudent(index) {
            const student = students[index];
        
            // Fill the form with student data
            document.getElementById('studentRollNo').value = student.rollNo;
            document.getElementById('studentName').value = student.name;
            document.getElementById('studentSemester').value = student.semester;
            document.getElementById('studentDepartment').value = student.department;
            
            // Update subjects based on department and semester
            updateSubjectOptions();
            setTimeout(() => {
                document.getElementById('studentSubject').value = student.subject;
            }, 100);
        
            // Fill theory marks
            document.getElementById('houseTest1').value = student.houseTest1 !== '0' ? student.houseTest1 : '';
            document.getElementById('houseTest2').value = student.houseTest2 !== '0' ? student.houseTest2 : '';
            document.getElementById('houseTest3').value = student.houseTest3 !== '0' ? student.houseTest3 : '';
            document.getElementById('assignmentMarks').value = student.assignmentMarks !== '0' ? student.assignmentMarks : '';
            document.getElementById('seminarMarks').value = student.seminarMarks !== '0' ? student.seminarMarks : '';
        
            // Fill practical marks
            document.getElementById('practicalFile').value = student.practicalFile !== '0' ? student.practicalFile : '';
            document.getElementById('vivaMarks').value = student.vivaMarks !== '0' ? student.vivaMarks : '';
            document.getElementById('performanceMarks').value = student.performanceMarks !== '0' ? student.performanceMarks : '';
            document.getElementById('attendanceMarks').value = student.attendanceMarks !== '0' ? student.attendanceMarks : '';
            calculatePracticalTotal();
        
            // Remove the student from the array
            students.splice(index, 1);
        
            showToast('Student record loaded for editing', 'success');
        }

        // Delete student
        function deleteStudent(index) {
            if (confirm('Are you sure you want to delete this student record?')) {
                students.splice(index, 1);
                renderStudentsTable();
                renderPracticalTable();
                updateDashboardStats();
                saveAllStudentData();
                showToast('Student record deleted successfully!', 'success');
            }
        }

        // Clear student form
        function clearStudentForm() {
            document.getElementById('studentRollNo').value = '';
            document.getElementById('studentName').value = '';
            document.getElementById('studentSemester').value = '';
            document.getElementById('studentDepartment').value = '';
            document.getElementById('studentSubject').value = '';
            document.getElementById('houseTest1').value = '';
            document.getElementById('houseTest2').value = '';
            document.getElementById('houseTest3').value = '';
            document.getElementById('assignmentMarks').value = '';
            document.getElementById('seminarMarks').value = '';
            document.getElementById('practicalFile').value = '';
            document.getElementById('vivaMarks').value = '';
            document.getElementById('performanceMarks').value = '';
            document.getElementById('attendanceMarks').value = '';
            document.getElementById('totalPracticalMarks').value = '';
        }

        // Save all student data
        function saveAllStudentData() {
            localStorage.setItem('studentData', JSON.stringify(students));
        }

        // Toggle profile dropdown
        function toggleProfileDropdown(e) {
            e.stopPropagation();
            profileDropdown.classList.toggle('active');
            if (profileDropdown.classList.contains('active')) {
                document.addEventListener('click', closeProfileDropdown);
            } else {
                document.removeEventListener('click', closeProfileDropdown);
            }
        }

        // Close profile dropdown
        function closeProfileDropdown() {
            profileDropdown.classList.remove('active');
            document.removeEventListener('click', closeProfileDropdown);
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.innerHTML = `
                <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
                ${message}
            `;
            toastContainer.appendChild(toast);

            setTimeout(() => {
                toast.classList.add('fade-out');
                setTimeout(() => toast.remove(), 300);
            }, 5000);
        }

        // Navigate to section
        function navigateToSection(section) {
            sectionContents.forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${section}Section`).classList.add('active');

            menuItems.forEach(item => {
                item.classList.toggle('active', item.dataset.section === section);
            });

            pageTitle.textContent = section === 'dashboard' ? 'Dashboard' : 'Student Management';
        }

        // Logout
        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                showToast('You have been logged out successfully', 'success');
                updateProfileSection();
            }
        }

        // Update dashboard stats
        function updateDashboardStats() {
            document.getElementById('totalStudents').textContent = students.length;
        
            if (students.length > 0) {
                let totalMarks = 0;
                let count = 0;
        
                students.forEach(student => {
                    if (student.houseTest1 !== '0') {
                        totalMarks += parseInt(student.houseTest1);
                        count++;
                    }
                    if (student.houseTest2 !== '0') {
                        totalMarks += parseInt(student.houseTest2);
                        count++;
                    }
                    if (student.houseTest3 !== '0') {
                        totalMarks += parseInt(student.houseTest3);
                        count++;
                    }
                    if (student.assignmentMarks) {
                        totalMarks += parseInt(student.assignmentMarks);
                        count++;
                    }
                    if (student.seminarMarks) {
                        totalMarks += parseInt(student.seminarMarks);
                        count++;
                    }
                });
        
                const avgMarks = count > 0 ? (totalMarks / count) : 0;
                document.getElementById('avgMarks').textContent = avgMarks.toFixed(1) + '%';
            }
        }


        
// Generate PDF report
function generatePdfReport() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    // Add title
    doc.setFontSize(18);
    doc.setTextColor(40);
    doc.text('Sessional Marks Report', 105, 15, { align: 'center' });
    
    // Add date
    doc.setFontSize(10);
    doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, 22, { align: 'center' });
    
    // Prepare data for the table
    const reportData = students.map((student, index) => {
        // Calculate total theory marks
        const theoryTotal = [
            student.houseTest1,
            student.houseTest2,
            student.houseTest3,
            student.assignmentMarks,
            student.seminarMarks
        ].reduce((sum, mark) => sum + (parseInt(mark) || 0), 0);
        
        // Calculate total practical marks
        const practicalTotal = [
            student.practicalFile,
            student.vivaMarks,
            student.performanceMarks,
            student.attendanceMarks
        ].reduce((sum, mark) => sum + (parseInt(mark) || 0), 0);
        
        return [
            index + 1,
            student.rollNo,
            student.name,
            theoryTotal,
            practicalTotal
        ];
    });
    
    // Add table
    doc.autoTable({
        head: [['S.No', 'Roll No', 'Name', 'Total Theory', 'Total Practical']],
        body: reportData,
        startY: 30,
        styles: {
            fontSize: 10,
            cellPadding: 2,
            valign: 'middle'
        },
        headStyles: {
            fillColor: [41, 128, 185],
            textColor: 255,
            fontStyle: 'bold'
        },
        alternateRowStyles: {
            fillColor: [245, 245, 245]
        },
        columnStyles: {
            0: { cellWidth: 15 }, // S.No
            1: { cellWidth: 25 }, // Roll No
            2: { cellWidth: 50 }, // Name
            3: { cellWidth: 30 }, // Theory
            4: { cellWidth: 30 }  // Practical
        },
        didDrawPage: function (data) {
            // Footer
            doc.setFontSize(10);
            doc.setTextColor(150);
            doc.text('Sessional Marks Management System', data.settings.margin.left, doc.internal.pageSize.height - 10);
        }
    });
    
    // Save the PDF
    doc.save(`Sessional_Marks_Report_${new Date().toISOString().slice(0,10)}.pdf`);
}

// Add event listener for the PDF button in setupEventListeners()
document.getElementById('downloadPdf').addEventListener('click', generatePdfReport);


// Inside your existing setupEventListeners() function, add:
document.getElementById('downloadPdf').addEventListener('click', generatePdfReport);

// Add this new function anywhere in your script:
function generatePdfReport() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    
    // Add title
    doc.setFontSize(18);
    doc.setTextColor(40);
    doc.text('Sessional Marks Report', 105, 15, { align: 'center' });
    
    // Add date
    doc.setFontSize(10);
    doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, 22, { align: 'center' });
    
    // Prepare data for the table
    const reportData = students.map((student, index) => {
        // Calculate total theory marks
        const theoryTotal = [
            student.houseTest1,
            student.houseTest2,
            student.houseTest3,
            student.assignmentMarks,
            student.seminarMarks
        ].reduce((sum, mark) => sum + (parseInt(mark) || 0), 0);
        
        // Calculate total practical marks
        const practicalTotal = [
            student.practicalFile,
            student.vivaMarks,
            student.performanceMarks,
            student.attendanceMarks
        ].reduce((sum, mark) => sum + (parseInt(mark) || 0), 0);
        
        return [
            index + 1,
            student.rollNo,
            student.name,
            theoryTotal,
            practicalTotal
        ];
    });
    
    // Add table
    doc.autoTable({
        head: [['S.No', 'Roll No', 'Name', 'Total Theory', 'Total Practical']],
        body: reportData,
        startY: 30,
        styles: {
            fontSize: 10,
            cellPadding: 2,
            valign: 'middle'
        },
        headStyles: {
            fillColor: [41, 128, 185],
            textColor: 255,
            fontStyle: 'bold'
        },
        alternateRowStyles: {
            fillColor: [245, 245, 245]
        },
        columnStyles: {
            0: { cellWidth: 15 }, // S.No
            1: { cellWidth: 25 }, // Roll No
            2: { cellWidth: 50 }, // Name
            3: { cellWidth: 30 }, // Theory
            4: { cellWidth: 30 }  // Practical
        },
        didDrawPage: function (data) {
            // Footer
            doc.setFontSize(10);
            doc.setTextColor(150);
            doc.text('Sessional Marks Management System', data.settings.margin.left, doc.internal.pageSize.height - 10);
        }
    });
    
    // Save the PDF
    doc.save(`Sessional_Marks_Report_${new Date().toISOString().slice(0,10)}.pdf`);
}


        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);

        // Make functions available globally for inline event handlers
        window.editStudent = editStudent;
        window.deleteStudent = deleteStudent;
        window.navigateToSection = navigateToSection;


    </script>

</body>

</html>
                       